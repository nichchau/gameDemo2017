{"version":3,"file":"legend-item.js","sources":["legend-item.js"],"sourcesContent":["import { drawing as draw } from '@progress/kendo-drawing';\n\nimport { BoxElement, FloatElement, ShapeElement, TextBox } from '../../core';\nimport { LEGEND_ITEM_CLICK, LEGEND_ITEM_HOVER } from '../constants';\nimport { CENTER, WHITE } from '../../common/constants';\nimport { deepExtend, eventElement } from '../../common';\n\nclass LegendItem extends BoxElement {\n    constructor(options) {\n        super(options);\n\n        this.createContainer();\n        this.createMarker();\n        this.createLabel();\n    }\n\n    createContainer() {\n        this.container = new FloatElement({ vertical: false, wrap: false, align: CENTER });\n        this.append(this.container);\n    }\n\n    createMarker() {\n        this.container.append(new ShapeElement(this.markerOptions()));\n    }\n\n    markerOptions() {\n        const options = this.options;\n        const markerColor = options.markerColor;\n        return deepExtend({}, options.markers, {\n            background: markerColor,\n            border: {\n                color: markerColor\n            }\n        });\n    }\n\n    createLabel() {\n        const options = this.options;\n        const labelOptions = deepExtend({}, options.labels);\n\n        this.container.append(new TextBox(options.text, labelOptions));\n    }\n\n    renderComplete() {\n        super.renderComplete();\n\n        const cursor = this.options.cursor || {};\n        const eventSink = this._itemOverlay = draw.Path.fromRect(this.container.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null,\n            cursor: cursor.style || cursor\n        });\n\n        this.appendVisual(eventSink);\n    }\n\n    click(widget, e) {\n        const args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_CLICK, args)) {\n            e.preventDefault();\n        }\n    }\n\n    hover(widget, e) {\n        const args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n            e.preventDefault();\n            widget._legendItemHover(args.seriesIndex, args.pointIndex);\n        }\n\n        // Don't trigger point hover for legend items\n        return true;\n    }\n\n    leave(widget) {\n        widget._unsetActivePoint();\n    }\n\n    eventArgs(e) {\n        const options = this.options;\n\n        return {\n            element: eventElement(e),\n            text: options.text,\n            series: options.series,\n            seriesIndex: options.series.index,\n            pointIndex: options.pointIndex\n        };\n    }\n\n    renderVisual() {\n        const options = this.options;\n        const customVisual = options.visual;\n\n        if (customVisual) {\n            this.visual = customVisual({\n                active: options.active,\n                series: options.series,\n                sender: this.getSender(),\n                pointIndex: options.pointIndex,\n                options: {\n                    markers: this.markerOptions(),\n                    labels: options.labels\n                },\n                createVisual: () => {\n                    this.createVisual();\n                    this.renderChildren();\n                    this.renderComplete();\n\n                    const defaultVisual = this.visual;\n\n                    delete this.visual;\n\n                    return defaultVisual;\n                }\n            });\n            this.addVisual();\n        } else {\n            super.renderVisual();\n        }\n    }\n}\n\nexport default LegendItem;\n"],"names":["super","const","this"],"mappings":"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"}