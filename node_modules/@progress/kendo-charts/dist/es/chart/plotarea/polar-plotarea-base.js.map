{"version":3,"file":"polar-plotarea-base.js","sources":["polar-plotarea-base.js"],"sourcesContent":["import PlotAreaBase from './plotarea-base';\nimport AxisGroupRangeTracker from '../axis-group-range-tracker';\nimport { RadarLogarithmicAxis, RadarNumericAxis } from '../../core';\n\nimport { LOGARITHMIC } from '../constants';\n\nimport { getSpacing } from '../../common';\n\nconst DEFAULT_PADDING = 0.15;\n\nclass PolarPlotAreaBase extends PlotAreaBase {\n    initFields() {\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n    }\n\n    render() {\n        this.addToLegend(this.series);\n        this.createPolarAxis();\n        this.createCharts();\n        this.createValueAxis();\n    }\n\n    alignAxes() {\n        const axis = this.valueAxis;\n        const range = axis.range();\n        const crossingValue = axis.options.reverse ? range.max : range.min;\n        const slot = axis.getSlot(crossingValue);\n        const center = this.polarAxis.getSlot(0).center;\n        const axisBox = axis.box.translate(\n            center.x - slot.x1,\n            center.y - slot.y1\n        );\n\n        axis.reflow(axisBox);\n    }\n\n    createValueAxis() {\n        const tracker = this.valueAxisRangeTracker;\n        const defaultRange = tracker.query();\n        const axisOptions = this.valueAxisOptions({\n            roundToMajorUnit: false,\n            zIndex: -1\n        });\n        let axisType, axisDefaultRange;\n\n        if (axisOptions.type === LOGARITHMIC) {\n            axisType = RadarLogarithmicAxis;\n            axisDefaultRange = { min: 0.1, max: 1 };\n        } else {\n            axisType = RadarNumericAxis;\n            axisDefaultRange = { min: 0, max: 1 };\n        }\n\n        const range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n        if (range && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        const valueAxis = new axisType(\n            range.min, range.max,\n            axisOptions,\n            this.chartService\n        );\n\n        this.valueAxis = valueAxis;\n        this.appendAxis(valueAxis);\n    }\n\n    reflowAxes() {\n        const { options: { plotArea: options }, valueAxis, polarAxis, box } = this;\n        const defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n        const padding = getSpacing(options.padding || {}, defaultPadding);\n        const axisBox = box.clone().unpad(padding);\n        const valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n        polarAxis.reflow(axisBox);\n        valueAxis.reflow(valueAxisBox);\n        const heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n        valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n        this.axisBox = axisBox;\n        this.alignAxes(axisBox);\n    }\n\n    backgroundBox() {\n        return this.box;\n    }\n}\n\nexport default PolarPlotAreaBase;"],"names":["const","let"],"mappings":"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"}