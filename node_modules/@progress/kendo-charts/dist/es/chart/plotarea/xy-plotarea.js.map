{"version":3,"file":"xy-plotarea.js","sources":["xy-plotarea.js"],"sourcesContent":["import PlotAreaBase from './plotarea-base';\nimport AxisGroupRangeTracker from '../axis-group-range-tracker';\nimport PlotAreaEventsMixin from '../mixins/plotarea-events-mixin';\nimport ScatterChart from '../scatter-charts/scatter-chart';\nimport ScatterLineChart from '../scatter-charts/scatter-line-chart';\nimport BubbleChart from '../bubble-chart/bubble-chart';\nimport SeriesBinder from '../series-binder';\n\nimport { NumericAxis, LogarithmicAxis, DateValueAxis, Point } from '../../core';\n\nimport filterSeriesByType from '../utils/filter-series-by-type';\nimport equalsIgnoreCase from '../utils/equals-ignore-case';\nimport singleItemOrArray from '../utils/single-item-or-array';\n\nimport { SCATTER, SCATTER_LINE, BUBBLE, LOGARITHMIC } from '../constants';\n\nimport { DATE } from '../../common/constants';\nimport { deepExtend, eventElement, grep, inArray, setDefaultOptions } from '../../common';\n\nclass XYPlotArea extends PlotAreaBase {\n    initFields() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n\n        this.xAxisRangeTracker = new AxisGroupRangeTracker();\n        this.yAxisRangeTracker = new AxisGroupRangeTracker();\n    }\n\n    render(panes = this.panes) {\n        const seriesByPane = this.groupSeriesByPane();\n\n        for (let i = 0; i < panes.length; i++) {\n            const pane = panes[i];\n            const paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this.addToLegend(paneSeries);\n            const filteredSeries = this.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this.createScatterChart(\n                filterSeriesByType(filteredSeries, SCATTER),\n                pane\n            );\n\n            this.createScatterLineChart(\n                filterSeriesByType(filteredSeries, SCATTER_LINE),\n                pane\n            );\n\n            this.createBubbleChart(\n                filterSeriesByType(filteredSeries, BUBBLE),\n                pane\n            );\n        }\n\n        this.createAxes(panes);\n    }\n\n    appendChart(chart, pane) {\n        this.xAxisRangeTracker.update(chart.xAxisRanges);\n        this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n        super.appendChart(chart, pane);\n    }\n\n    removeAxis(axis) {\n        const axisName = axis.options.name;\n\n        super.removeAxis(axis);\n\n        if (axis.options.vertical) {\n            this.yAxisRangeTracker.reset(axisName);\n            delete this.namedYAxes[axisName];\n        } else {\n            this.xAxisRangeTracker.reset(axisName);\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    }\n\n    // TODO: Refactor, optionally use series.pane option\n    seriesPaneName(series) {\n        const options = this.options;\n        const xAxisName = series.xAxis;\n        const xAxisOptions = [].concat(options.xAxis);\n        const xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        const yAxisName = series.yAxis;\n        const yAxisOptions = [].concat(options.yAxis);\n        const yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        const panes = options.panes || [ {} ];\n        const defaultPaneName = panes[0].name || \"default\";\n        const paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    }\n\n    createScatterChart(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    }\n\n    createScatterLineChart(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    }\n\n    createBubbleChart(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    }\n\n    createXYAxis(options, vertical, axisIndex) {\n        const axisName = options.name;\n        const namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        const tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n        const axisOptions = deepExtend({}, options, { vertical: vertical });\n        const isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n        const defaultRange = tracker.query();\n        const defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n        const range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n        const typeSamples = [ axisOptions.min, axisOptions.max ];\n        const series = this.series;\n\n        for (let seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            const currentSeries = series[seriesIx];\n            const seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                const firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        if (axisIndex === 0 && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        let inferredDate;\n\n        for (let i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        let axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = DateValueAxis;\n        } else if (isLog) {\n            axisType = LogarithmicAxis;\n        } else {\n            axisType = NumericAxis;\n        }\n\n        const axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(`${ vertical ? \"Y\" : \"X\" } axis with name ${ axisName } is already defined`);\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n\n        return axis;\n    }\n\n    createAxes(panes) {\n        const options = this.options;\n        const xAxesOptions = [].concat(options.xAxis);\n        const xAxes = [];\n        const yAxesOptions = [].concat(options.yAxis);\n        const yAxes = [];\n\n        for (let idx = 0; idx < xAxesOptions.length; idx++) {\n            const axisPane = this.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (let idx = 0; idx < yAxesOptions.length; idx++) {\n            const axisPane = this.findPane(yAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                yAxes.push(this.createXYAxis(yAxesOptions[idx], true, idx));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    }\n\n    _dispatchEvent(chart, e, eventType) {\n        const coords = chart._eventCoordinates(e);\n        const point = new Point(coords.x, coords.y);\n        const allAxes = this.axes;\n        const length = allAxes.length;\n        const xValues = [];\n        const yValues = [];\n\n        for (let i = 0; i < length; i++) {\n            const axis = allAxes[i];\n            const values = axis.options.vertical ? yValues : xValues;\n            const currentValue = axis.getValue(point);\n            if (currentValue !== null) {\n                values.push(currentValue);\n            }\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    }\n\n    updateAxisOptions(axis, options) {\n        const vertical = axis.options.vertical;\n        const axes = this.groupAxes(this.panes);\n        const index = (vertical ? axes.y : axes.x).indexOf(axis);\n        const axisOptions = ([].concat(vertical ? this.options.yAxis : this.options.xAxis))[index];\n        deepExtend(axisOptions, options);\n    }\n}\n\nsetDefaultOptions(XYPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\nexport default XYPlotArea;"],"names":["const","let","this","super","idx","axisPane"],"mappings":"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"}