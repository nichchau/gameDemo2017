{"version":3,"file":"aggregates.js","sources":["aggregates.js"],"sourcesContent":["import { MIN_VALUE, MAX_VALUE } from '../../common/constants';\nimport { defined, isNumber } from '../../common';\n\nimport countNumbers from '../utils/count-numbers';\n\nconst Aggregates = {\n    min: function(values) {\n        const length = values.length;\n        let min = MAX_VALUE;\n\n        for (let i = 0; i < length; i++) {\n            const value = values[i];\n            if (isNumber(value)) {\n                min = Math.min(min, value);\n            }\n        }\n\n        return min === MAX_VALUE ? values[0] : min;\n    },\n\n    max: function(values) {\n        const length = values.length;\n        let max = MIN_VALUE;\n\n        for (let i = 0; i < length; i++) {\n            const value = values[i];\n            if (isNumber(value)) {\n                max = Math.max(max, value);\n            }\n        }\n\n        return max === MIN_VALUE ? values[0] : max;\n    },\n\n    sum: function(values) {\n        const length = values.length;\n        let sum = 0;\n\n        for (let i = 0; i < length; i++) {\n            const value = values[i];\n            if (isNumber(value)) {\n                sum += value;\n            }\n        }\n\n        return sum;\n    },\n\n    sumOrNull: function(values) {\n        let result = null;\n\n        if (countNumbers(values)) {\n            result = Aggregates.sum(values);\n        }\n\n        return result;\n    },\n\n    count: function(values) {\n        const length = values.length;\n        let count = 0;\n\n        for (let i = 0; i < length; i++) {\n            const value = values[i];\n            if (value !== null && defined(value)) {\n                count++;\n            }\n        }\n\n        return count;\n    },\n\n    avg: function(values) {\n        const count = countNumbers(values);\n        let result = values[0];\n\n        if (count > 0) {\n            result = Aggregates.sum(values) / count;\n        }\n\n        return result;\n    },\n\n    first: function(values) {\n        const length = values.length;\n\n        for (let i = 0; i < length; i++) {\n            const value = values[i];\n            if (value !== null && defined(value)) {\n                return value;\n            }\n        }\n\n        return values[0];\n    }\n};\n\nexport default Aggregates;"],"names":["const","let"],"mappings":"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"}