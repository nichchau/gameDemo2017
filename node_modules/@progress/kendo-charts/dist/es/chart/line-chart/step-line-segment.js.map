{"version":3,"file":"step-line-segment.js","sources":["step-line-segment.js"],"sourcesContent":["import { geometry as geom } from '@progress/kendo-drawing';\n\nimport LineSegment from './line-segment';\n\nimport { INTERPOLATE } from '../constants';\n\nimport { X, Y } from '../../common/constants';\n\nclass StepLineSegment extends LineSegment {\n    points(visualPoints) {\n        let points = this.calculateStepPoints(this.linePoints);\n\n        if (visualPoints && visualPoints.length) {\n            points = points.concat(this.calculateStepPoints(visualPoints).reverse());\n        }\n\n        return points;\n    }\n\n    calculateStepPoints(points) {\n        const chart = this.parent;\n        const plotArea = chart.plotArea;\n        const categoryAxis = plotArea.seriesCategoryAxis(this.series);\n        const isInterpolate = chart.seriesMissingValues(this.series) === INTERPOLATE;\n        const reverse = categoryAxis.options.reverse;\n        const vertical = categoryAxis.options.vertical;\n        const dir = reverse ? 2 : 1;\n        const revDir = reverse ? 1 : 2;\n        const length = points.length;\n        const result = [];\n\n        for (let i = 1; i < length; i++) {\n            const prevPoint = points[i - 1];\n            const point = points[i];\n            const prevMarkerBoxCenter = prevPoint.markerBox().center();\n            const markerBoxCenter = point.markerBox().center();\n            if (categoryAxis.options.justified) {\n                result.push(new geom.Point(prevMarkerBoxCenter.x, prevMarkerBoxCenter.y));\n                if (vertical) {\n                    result.push(new geom.Point(prevMarkerBoxCenter.x, markerBoxCenter.y));\n                } else {\n                    result.push(new geom.Point(markerBoxCenter.x, prevMarkerBoxCenter.y));\n                }\n                result.push(new geom.Point(markerBoxCenter.x, markerBoxCenter.y));\n            } else {\n                if (vertical) {\n                    result.push(new geom.Point(prevMarkerBoxCenter.x, prevPoint.box[Y + dir]));\n                    result.push(new geom.Point(prevMarkerBoxCenter.x, prevPoint.box[Y + revDir]));\n                    if (isInterpolate) {\n                        result.push(new geom.Point(prevMarkerBoxCenter.x, point.box[Y + dir]));\n                    }\n                    result.push(new geom.Point(markerBoxCenter.x, point.box[Y + dir]));\n                    result.push(new geom.Point(markerBoxCenter.x, point.box[Y + revDir]));\n                } else {\n                    result.push(new geom.Point(prevPoint.box[X + dir], prevMarkerBoxCenter.y));\n                    result.push(new geom.Point(prevPoint.box[X + revDir], prevMarkerBoxCenter.y));\n                    if (isInterpolate) {\n                        result.push(new geom.Point(point.box[X + dir], prevMarkerBoxCenter.y));\n                    }\n                    result.push(new geom.Point(point.box[X + dir], markerBoxCenter.y));\n                    result.push(new geom.Point(point.box[X + revDir], markerBoxCenter.y));\n                }\n            }\n        }\n\n        return result || [];\n    }\n}\n\nexport default StepLineSegment;"],"names":["let","const"],"mappings":"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"}