{"version":3,"file":"shared-tooltip.js","sources":["shared-tooltip.js"],"sourcesContent":["import BaseTooltip from './base-tooltip';\nimport { Point } from '../../core';\n\nimport { grep, setDefaultOptions } from '../../common';\n\nclass SharedTooltip extends BaseTooltip {\n    constructor(plotArea, options) {\n        super(plotArea.chartService, options);\n\n        this.plotArea = plotArea;\n        this.formatService = plotArea.chartService.format;\n    }\n\n    showAt(points, coords) {\n        const tooltipPoints = grep(points, function(point) {\n            const tooltip = point.series.tooltip;\n            const excluded = tooltip && tooltip.visible === false;\n\n            return !excluded;\n        });\n\n        if (tooltipPoints.length > 0) {\n            const point = tooltipPoints[0];\n            const slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n            const anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n            this.show({\n                anchor: anchor,\n                shared: true,\n                points: points,\n                category: point.category,\n                categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                series: this.plotArea.series\n            }, this.options);\n        }\n    }\n\n    _slotAnchor(point, slot) {\n        const axis = this.plotArea.categoryAxis;\n        const align = {\n            horizontal: \"left\",\n            vertical: \"center\"\n        };\n\n        if (!axis.options.vertical) {\n            point.x = slot.center().x;\n        }\n\n        return {\n            point: point,\n            align: align\n        };\n    }\n\n    _defaultAnchor(point, slot) {\n        const box = point.owner.pane.chartsBox();\n        const vertical = this.plotArea.categoryAxis.options.vertical;\n        const center = box.center();\n        const slotCenter = slot.center();\n        const align = {\n            horizontal: \"center\",\n            vertical: \"center\"\n        };\n\n        let centerPoint;\n        if (vertical) {\n            centerPoint = new Point(center.x, slotCenter.y);\n        } else {\n            centerPoint = new Point(slotCenter.x, center.y);\n        }\n\n        return {\n            point: centerPoint,\n            align: align\n        };\n    }\n}\n\nsetDefaultOptions(SharedTooltip, {\n    categoryFormat: '{0:d}'\n});\n\nexport default SharedTooltip;"],"names":["super","const","let"],"mappings":"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"}