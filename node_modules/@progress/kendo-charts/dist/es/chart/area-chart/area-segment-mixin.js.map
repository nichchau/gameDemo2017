{"version":3,"file":"area-segment-mixin.js","sources":["area-segment-mixin.js"],"sourcesContent":["import { drawing as draw, geometry as geom } from '@progress/kendo-drawing';\n\nimport { X, Y } from '../../common/constants';\nimport { deepExtend, isFunction, last, limitValue } from '../../common';\n\nconst AreaSegmentMixin = {\n    points: function() {\n        const chart = this.parent;\n        const plotArea = chart.plotArea;\n        const invertAxes = chart.options.invertAxes;\n        const valueAxis = chart.seriesValueAxis(this.series);\n        const valueAxisLineBox = valueAxis.lineBox();\n        const categoryAxis = plotArea.seriesCategoryAxis(this.series);\n        const categoryAxisLineBox = categoryAxis.lineBox();\n        const stackPoints = this.stackPoints;\n        const points = this._linePoints(stackPoints);\n        const pos = invertAxes ? X : Y;\n        let end = invertAxes ? categoryAxisLineBox.x1 : categoryAxisLineBox.y1;\n\n        end = limitValue(end, valueAxisLineBox[pos + 1], valueAxisLineBox[pos + 2]);\n        if (!this.stackPoints && points.length > 1) {\n            const firstPoint = points[0];\n            const lastPoint = last(points);\n\n            if (invertAxes) {\n                points.unshift(new geom.Point(end, firstPoint.y));\n                points.push(new geom.Point(end, lastPoint.y));\n            } else {\n                points.unshift(new geom.Point(firstPoint.x, end));\n                points.push(new geom.Point(lastPoint.x, end));\n            }\n        }\n\n        return points;\n    },\n\n    createVisual: function() {\n        const series = this.series;\n        const defaults = series._defaults;\n        let color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        this.visual = new draw.Group({\n            zIndex: series.zIndex\n        });\n\n        this.createArea(color);\n        this.createLine(color);\n    },\n\n    createLine: function(color) {\n        const series = this.series;\n        const lineOptions = deepExtend({\n            color: color,\n            opacity: series.opacity\n        }, series.line);\n\n        if (lineOptions.visible !== false && lineOptions.width > 0) {\n            const line = draw.Path.fromPoints(this._linePoints(), {\n                stroke: {\n                    color: lineOptions.color,\n                    width: lineOptions.width,\n                    opacity: lineOptions.opacity,\n                    dashType: lineOptions.dashType,\n                    lineCap: \"butt\"\n                }\n            });\n\n            this.visual.append(line);\n        }\n    },\n\n    createArea: function(color) {\n        const series = this.series;\n\n        const area = draw.Path.fromPoints(this.points(), {\n            fill: {\n                color: color,\n                opacity: series.opacity\n            },\n            stroke: null\n        });\n\n        this.visual.append(area);\n    }\n};\n\nexport default AreaSegmentMixin;"],"names":["const","let"],"mappings":"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"}