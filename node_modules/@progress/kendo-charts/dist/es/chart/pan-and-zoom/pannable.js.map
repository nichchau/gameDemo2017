{"version":3,"file":"pannable.js","sources":["pannable.js"],"sourcesContent":["import acceptKey from './accept-key';\nimport toChartAxisRanges from './to-chart-axis-ranges';\n\nimport { X, Y } from '../../common/constants';\nimport { Class, deepExtend } from '../../common';\n\nclass Pannable extends Class {\n    constructor(plotArea, options) {\n        super();\n\n        this.plotArea = plotArea;\n        this.options = deepExtend({}, this.options, options);\n    }\n\n    start(e) {\n        this._active = acceptKey(e, this.options.key);\n        return this._active;\n    }\n\n    move(e) {\n        if (this._active) {\n            const axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n            if (axisRanges.length) {\n                this.axisRanges = axisRanges;\n                return toChartAxisRanges(axisRanges);\n            }\n        }\n    }\n\n    end() {\n        const active = this._active;\n        this._active = false;\n\n        return active;\n    }\n\n    pan() {\n        const { plotArea, axisRanges } = this;\n        if (axisRanges.length) {\n            for (let idx = 0; idx < axisRanges.length; idx++) {\n                const range = axisRanges[idx];\n                plotArea.updateAxisOptions(range.axis, range.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    }\n\n    destroy() {\n        delete this.plotArea;\n    }\n\n    _panAxes(e, position) {\n        const plotArea = this.plotArea;\n        const delta = -e[position].delta;\n        const lock = (this.options.lock || \"\").toLowerCase();\n        const updatedAxes = [];\n\n        if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n            const axes = plotArea.axes;\n            for (let idx = 0; idx < axes.length; idx++) {\n                const axis = axes[idx];\n\n                if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                    const range = axis.pan(delta);\n\n                    if (range) {\n                        range.limitRange = true;\n                        updatedAxes.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n        }\n\n        return updatedAxes;\n    }\n}\n\nPannable.prototype.options = {\n    key: \"none\",\n    lock: \"none\"\n};\n\nexport default Pannable;"],"names":["super","const","let"],"mappings":"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"}