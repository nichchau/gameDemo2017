{"version":3,"file":"crosshair-tooltip.js","sources":["crosshair-tooltip.js"],"sourcesContent":["import BaseTooltip from '../tooltip/base-tooltip';\n\nimport { HIDE_TOOLTIP } from '../constants';\nimport { TOP, BOTTOM, LEFT, RIGHT, CENTER, DATE } from '../../common/constants';\nimport { setDefaultOptions } from '../../common';\n\nclass CrosshairTooltip extends BaseTooltip {\n    constructor(chartService, crosshair, options) {\n        super(chartService, options);\n\n        this.crosshair = crosshair;\n        this.formatService = chartService.format;\n        this.initAxisName();\n    }\n\n    initAxisName() {\n        const axis = this.crosshair.axis;\n        const plotArea = axis.plotArea;\n        let name;\n        if (plotArea.categoryAxis) {\n            name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n        } else {\n            name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n        }\n        this.axisName = name;\n    }\n\n    showAt(point) {\n        const { crosshair: { axis }, options } = this;\n        let value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n        let formattedValue = value;\n\n        if (options.format) {\n            formattedValue = this.formatService.auto(options.format, value);\n        } else if (axis.options.type === DATE) {\n            formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n        }\n\n        this.show({\n            point: point,\n            anchor: this.getAnchor(),\n            crosshair: this.crosshair,\n            value: formattedValue,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        }, this.options);\n    }\n\n    hide() {\n        this.chartService.notify(HIDE_TOOLTIP, {\n            crosshair: this.crosshair,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        });\n    }\n\n    getAnchor() {\n        const { crosshair, options: { position, padding } } = this;\n        const vertical = !crosshair.axis.options.vertical;\n        const lineBox = crosshair.line.bbox();\n        let horizontalAlign, verticalAlign, point;\n\n        if (vertical) {\n            horizontalAlign = CENTER;\n            if (position === BOTTOM) {\n                verticalAlign = TOP;\n                point = lineBox.bottomLeft().translate(0, padding);\n            } else {\n                verticalAlign = BOTTOM;\n                point = lineBox.topLeft().translate(0, -padding);\n            }\n        } else {\n            verticalAlign = CENTER;\n            if (position === LEFT) {\n                horizontalAlign = RIGHT;\n                point = lineBox.topLeft().translate(-padding, 0);\n            } else {\n                horizontalAlign = LEFT;\n                point = lineBox.topRight().translate(padding, 0);\n            }\n        }\n\n        return {\n            point: point,\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    }\n}\n\nsetDefaultOptions(CrosshairTooltip, {\n    padding: 10\n});\n\nexport default CrosshairTooltip;\n\n"],"names":["super","const","let"],"mappings":"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"}