{"version":3,"file":"funnel-segment.js","sources":["funnel-segment.js"],"sourcesContent":["import { drawing as draw } from '@progress/kendo-drawing';\n\nimport { ChartElement, Box, Point } from '../../core';\nimport PointEventsMixin from '../mixins/point-events-mixin';\n\nimport { WHITE } from '../../common/constants';\nimport { deepExtend, setDefaultOptions } from '../../common';\n\nclass FunnelSegment extends ChartElement {\n    constructor(value, options, segmentOptions) {\n        super(options);\n\n        this.value = value;\n        this.options.index = segmentOptions.index;\n    }\n\n    reflow(chartBox) {\n        const points = this.points;\n        const label = this.children[0];\n\n        this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n        if (label) {\n            label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n        }\n    }\n\n    createVisual() {\n        const options = this.options;\n        let visual;\n\n        super.createVisual();\n\n        if (options.visual) {\n            visual = options.visual({\n                category: this.category,\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage,\n                points: this.points,\n                options: options,\n                sender: this.getSender(),\n                createVisual: () => this.createPath()\n            });\n        } else {\n            visual = this.createPath();\n        }\n\n        if (visual) {\n            this.visual.append(visual);\n        }\n    }\n\n    createPath() {\n        const options = this.options;\n        const border = options.border;\n        const path = draw.Path.fromPoints(this.points, {\n            fill: {\n                color: options.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: border.color,\n                opacity: border.opacity,\n                width: border.width\n            }\n        }).close();\n\n        return path;\n    }\n\n    createHighlight(style) {\n        return draw.Path.fromPoints(this.points, style);\n    }\n\n    highlightVisual() {\n        return this.visual.children[0];\n    }\n\n    highlightVisualArgs() {\n        const path = draw.Path.fromPoints(this.points).close();\n\n        return {\n            options: this.options,\n            path: path\n        };\n    }\n\n    tooltipAnchor() {\n        const box = this.box;\n        return {\n            point: new Point(box.center().x, box.y1),\n            align: {\n                horizontal: \"center\",\n                vertical: \"top\"\n            }\n        };\n    }\n\n    formatValue(format) {\n        const point = this;\n        return point.owner.formatPointValue(point, format);\n    }\n}\n\nsetDefaultOptions(FunnelSegment, {\n    color: WHITE,\n    border: {\n        width: 1\n    }\n});\n\ndeepExtend(FunnelSegment.prototype, PointEventsMixin);\n\nexport default FunnelSegment;"],"names":["super","const","let","this"],"mappings":"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"}