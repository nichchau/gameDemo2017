{"version":3,"file":"shape-element.js","sources":["shape-element.js"],"sourcesContent":["import { drawing as draw, geometry as geom } from '@progress/kendo-drawing';\n\nimport BoxElement from './box-element';\n\nimport { CIRCLE, TRIANGLE, CROSS, CENTER, COORD_PRECISION } from '../common/constants';\nimport { round, setDefaultOptions } from '../common';\n\nclass ShapeElement extends BoxElement {\n\n    constructor(options, pointData) {\n        super(options);\n\n        this.pointData = pointData;\n    }\n\n    getElement() {\n        const { options, paddingBox: box } = this;\n        const { type, rotation } = options;\n        const center = box.center();\n        const halfWidth = box.width() / 2;\n\n        if (!options.visible || !this.hasBox()) {\n            return null;\n        }\n\n        const style = this.visualStyle();\n        let element;\n\n        if (type === CIRCLE) {\n            element = new draw.Circle(\n                new geom.Circle([\n                    round(box.x1 + halfWidth, COORD_PRECISION),\n                    round(box.y1 + box.height() / 2, COORD_PRECISION)\n                ], halfWidth),\n                style\n            );\n        } else if (type === TRIANGLE) {\n            element = draw.Path.fromPoints([\n                [ box.x1 + halfWidth, box.y1 ],\n                [ box.x1, box.y2 ],\n                [ box.x2, box.y2 ]\n            ], style).close();\n        } else if (type === CROSS) {\n            element = new draw.MultiPath(style);\n\n            element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n            element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n        } else {\n            element = draw.Path.fromRect(box.toRect(), style);\n        }\n\n        if (rotation) {\n            element.transform(geom.transform()\n                .rotate(-rotation, [ center.x, center.y ])\n            );\n        }\n\n        element.options.zIndex = options.zIndex;\n        return element;\n    }\n\n    createElement() {\n        const customVisual = this.options.visual;\n        const pointData = this.pointData || {};\n        let visual;\n\n        if (customVisual) {\n            visual = customVisual({\n                value: pointData.value,\n                dataItem: pointData.dataItem,\n                sender: this.getSender(),\n                series: pointData.series,\n                category: pointData.category,\n                rect: this.paddingBox.toRect(),\n                options: this.visualOptions(),\n                createVisual: () => this.getElement()\n            });\n        } else {\n            visual = this.getElement();\n        }\n\n        return visual;\n    }\n\n    visualOptions() {\n        const options = this.options;\n        return {\n            background: options.background,\n            border: options.border,\n            margin: options.margin,\n            padding: options.padding,\n            type: options.type,\n            size: options.width,\n            visible: options.visible\n        };\n    }\n\n    createVisual() {\n        this.visual = this.createElement();\n    }\n}\n\nsetDefaultOptions(ShapeElement, {\n    type: CIRCLE,\n    align: CENTER,\n    vAlign: CENTER\n});\n\nexport default ShapeElement;"],"names":["super","const","let","this"],"mappings":"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"}