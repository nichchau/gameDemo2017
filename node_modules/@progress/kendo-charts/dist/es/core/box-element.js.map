{"version":3,"file":"box-element.js","sources":["box-element.js"],"sourcesContent":["import { drawing as draw } from '@progress/kendo-drawing';\n\nimport ChartElement from './chart-element';\nimport Box from './box';\n\nimport { BLACK, LEFT, TOP, X, Y } from '../common/constants';\nimport { getSpacing, setDefaultOptions, valueOrDefault } from '../common';\n\nclass BoxElement extends ChartElement {\n    constructor(options) {\n        super(options);\n\n        this.options.margin = getSpacing(this.options.margin);\n        this.options.padding = getSpacing(this.options.padding);\n    }\n\n    reflow(targetBox) {\n        const options = this.options;\n        const { width, height, shrinkToFit } = options;\n        const hasSetSize = width && height;\n        const margin = options.margin;\n        const padding = options.padding;\n        const borderWidth = options.border.width;\n        let box;\n\n        const reflowPaddingBox = () => {\n            this.align(targetBox, X, options.align);\n            this.align(targetBox, Y, options.vAlign);\n            this.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n        };\n\n        let contentBox = targetBox.clone();\n        if (hasSetSize) {\n            contentBox.x2 = contentBox.x1 + width;\n            contentBox.y2 = contentBox.y1 + height;\n        }\n\n        if (shrinkToFit) {\n            contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n        }\n\n        super.reflow(contentBox);\n\n        if (hasSetSize) {\n            box = this.box = new Box(0, 0, width, height);\n        } else {\n            box = this.box;\n        }\n\n        if (shrinkToFit && hasSetSize) {\n            reflowPaddingBox();\n            contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n        } else {\n            contentBox = this.contentBox = box.clone();\n            box.pad(padding).pad(borderWidth).pad(margin);\n            reflowPaddingBox();\n        }\n\n        this.translateChildren(\n            box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n            box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n        );\n\n        const children = this.children;\n        for (let i = 0; i < children.length; i++) {\n            let item = children[i];\n            item.reflow(item.box);\n        }\n    }\n\n    align(targetBox, axis, alignment) {\n        this.box.align(targetBox, axis, alignment);\n    }\n\n    hasBox() {\n        const options = this.options;\n        return options.border.width || options.background;\n    }\n\n    createVisual() {\n        super.createVisual();\n\n        const options = this.options;\n        if (options.visible && this.hasBox()) {\n            this.visual.append(draw.Path.fromRect(\n                this.paddingBox.toRect(),\n                this.visualStyle()\n            ));\n        }\n    }\n\n    visualStyle() {\n        const options = this.options;\n        const border = options.border || {};\n\n        return {\n            stroke: {\n                width: border.width,\n                color: border.color,\n                opacity: valueOrDefault(border.opacity, options.opacity),\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            cursor: options.cursor\n        };\n    }\n}\n\nsetDefaultOptions(BoxElement, {\n    align: LEFT,\n    vAlign: TOP,\n    margin: {},\n    padding: {},\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    background: \"\",\n    shrinkToFit: false,\n    width: 0,\n    height: 0,\n    visible: true\n});\n\nexport default BoxElement;"],"names":["super","const","let","this"],"mappings":"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"}