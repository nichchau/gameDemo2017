{"version":3,"file":"note.js","sources":["note.js"],"sourcesContent":["import { drawing as draw } from '@progress/kendo-drawing';\n\nimport BoxElement from './box-element';\nimport TextBox from './text-box';\nimport ShapeElement from './shape-element';\nimport Box from './box';\n\nimport { CIRCLE, TOP, BOTTOM, LEFT, RIGHT, CENTER, INSIDE, OUTSIDE, NOTE_CLICK, NOTE_HOVER } from '../common/constants';\nimport { alignPathToPixel, defined, deepExtend, eventElement, getTemplate, inArray, setDefaultOptions } from '../common';\n\nconst DEFAULT_ICON_SIZE = 7;\nconst DEFAULT_LABEL_COLOR = \"#fff\";\n\nclass Note extends BoxElement {\n    constructor(fields, options, chartService) {\n        super(options);\n\n        this.fields = fields;\n        this.chartService = chartService;\n\n        this.render();\n    }\n\n    hide() {\n        this.options.visible = false;\n    }\n\n    show() {\n        this.options.visible = true;\n    }\n\n    render() {\n        const options = this.options;\n\n        if (options.visible) {\n            const { label, icon } = options;\n            const box = new Box();\n            let size = icon.size;\n            let text = this.fields.text;\n            let width, height;\n\n            if (defined(label) && label.visible) {\n                const noteTemplate = getTemplate(label);\n                if (noteTemplate) {\n                    text = noteTemplate(this.fields);\n                } else if (label.format) {\n                    text = this.chartService.format.auto(label.format, text);\n                }\n\n                if (!label.color) {\n                    label.color = label.position === INSIDE ? DEFAULT_LABEL_COLOR : icon.background;\n                }\n\n                this.label = new TextBox(text, deepExtend({}, label));\n\n                if (label.position === INSIDE && !defined(size)) {\n                    if (icon.type === CIRCLE) {\n                        size = Math.max(this.label.box.width(), this.label.box.height());\n                    } else {\n                        width = this.label.box.width();\n                        height = this.label.box.height();\n                    }\n                    box.wrap(this.label.box);\n                }\n            }\n\n            icon.width = width || size || DEFAULT_ICON_SIZE;\n            icon.height = height || size || DEFAULT_ICON_SIZE;\n\n            let marker = new ShapeElement(deepExtend({}, icon));\n\n            this.marker = marker;\n            this.append(marker);\n\n            if (this.label) {\n                this.append(this.label);\n            }\n\n            marker.reflow(new Box());\n            this.wrapperBox = box.wrap(marker.box);\n        }\n    }\n\n    reflow(targetBox) {\n        const { options, label, marker, wrapperBox } = this;\n        const center = targetBox.center();\n        const length = options.line.length;\n        const position = options.position;\n\n        // TODO: Review\n        if (options.visible) {\n            let lineStart, box, contentBox;\n\n            if (inArray(position, [ LEFT, RIGHT ])) {\n                if (position === LEFT) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(-length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x1, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x2, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x2, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x1, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            } else {\n                if (position === BOTTOM) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y2 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y1 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, -length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y1 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y2 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            }\n\n            if (marker) {\n                marker.reflow(contentBox);\n            }\n\n            if (label) {\n                label.reflow(contentBox);\n                if (marker) {\n                    if (options.label.position === OUTSIDE) {\n                        label.box.alignTo(marker.box, position);\n                    }\n                    label.reflow(label.box);\n                }\n            }\n\n            this.contentBox = contentBox;\n            this.targetBox = targetBox;\n            this.box = box || contentBox;\n        }\n    }\n\n    createVisual() {\n        super.createVisual();\n        this.visual.options.noclip = this.options.noclip;\n\n        if (this.options.visible) {\n            this.createLine();\n        }\n    }\n\n    renderVisual() {\n        const options = this.options;\n        const customVisual = options.visual;\n        if (options.visible && customVisual) {\n            this.visual = customVisual(Object.assign(this.fields, {\n                sender: this.getSender(),\n                rect: this.targetBox.toRect(),\n                options: {\n                    background: options.background,\n                    border: options.background,\n                    icon: options.icon,\n                    label: options.label,\n                    line: options.line,\n                    position: options.position,\n                    visible: options.visible\n                },\n                createVisual: () => {\n                    this.createVisual();\n                    this.renderChildren();\n                    const defaultVisual = this.visual;\n                    delete this.visual;\n                    return defaultVisual;\n                }\n            }));\n            this.addVisual();\n        } else {\n            super.renderVisual();\n        }\n    }\n\n    createLine() {\n        const options = this.options.line;\n\n        if (this.linePoints) {\n            const path = draw.Path.fromPoints(this.linePoints, {\n                stroke: {\n                    color: options.color,\n                    width: options.width,\n                    dashType: options.dashType\n                }\n            });\n\n            alignPathToPixel(path);\n            this.visual.append(path);\n        }\n    }\n\n    click(widget, e) {\n        const args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_CLICK, args)) {\n            e.preventDefault();\n        }\n    }\n\n    hover(widget, e) {\n        const args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_HOVER, args)) {\n            e.preventDefault();\n        }\n    }\n\n    leave(widget) {\n        widget._unsetActivePoint();\n    }\n\n    eventArgs(e) {\n        const options = this.options;\n\n        return Object.assign(this.fields, {\n            element: eventElement(e),\n            text: defined(options.label) ? options.label.text : \"\",\n            visual: this.visual\n        });\n    }\n}\n\nsetDefaultOptions(Note, {\n    icon: {\n        visible: true,\n        type: CIRCLE\n    },\n    label: {\n        position: INSIDE,\n        visible: true,\n        align: CENTER,\n        vAlign: CENTER\n    },\n    line: {\n        visible: true\n    },\n    visible: true,\n    position: TOP,\n    zIndex: 2\n});\n\nexport default Note;"],"names":["const","super","let","this"],"mappings":"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"}